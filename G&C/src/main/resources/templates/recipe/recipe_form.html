<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:insert="includes/head :: head">
    <title id="pageTitle">Create a Recipe</title>
</head>

<body>
<!-- Custom Styling -->
<link rel="stylesheet" th:href="@{'/css/recipe/recipe_form.css'}">
<script th:src="@{'/js/recipe/add_step.js'}"></script>

<!-- Header -->
<header th:replace="includes/header :: header"></header>

<!-- Main -->
<main class="container-fluid align-items-center">

    <h2 class="title display-2 mx-auto">New Recipe</h2>

    <form action="/recipe/save" method="post" class="justify-content-center">
        <section id="recipe-introduction">
            <div class="form-floating">
                <input type="text" id="title" class="form-control" name="title" placeholder="Title" maxlength="255">
                <label for="title">Title</label>
            </div>
            <div class="form-floating">
                <textarea id="description" class="form-control" style="height: 25vh"
                          name="description" placeholder="Description" maxlength="255"></textarea>
                <label for="description">Description</label>
            </div>
            <div class="form-floating">
                <input type="number" id="timeInMinutes" class="form-control" name="time"
                       placeholder="Time in minutes" min="1">
                <label for="timeInMinutes">Time in minutes</label>
            </div>
        </section>
        <hr>

        <!----------------------------- INGREDIENTS ---------------------->
        <section id="recipe-ingredients">
            <h3 class="title">Products</h3>

            <table id="add_ingredient" class="table table-bordered">
                <thead id="add_ingredient_head">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Ingredient</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Unit/Value</th>
                    </tr>
                </thead>
                <tbody id="add_ingredient_body">
                    <tr class="new-ingredient">
                        <th scope="row" class="ingredient-id align-middle">1</th>
                        <td class="ingredient-description">
                            <input type="text" class="ingredient form-control" name="ingredient" placeholder="Ingredient">
                        </td>
                        <td class="ingredient-quantity">
                            <input type="number" class="productQuantity form-control" name="quantity" min="0">
                        </td>
                        <td class="ingredient-unit">
                            <select class="measurementUnit form-control" name="unit">
                                <option selected disabled th:value="${null}">Select</option>
                                <th:block th:each="unit : ${measurementList}">
                                    <option th:value="${unit}" th:text="${unit.toUpperCase()}"></option>
                                </th:block>
                            </select>
                        </td>
                        <td>
                            
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="row justify-content-center">
                <input type=button id="btn-ingredient" class="btn btn-success w-25" value="Add">
            </div>
        </section>
        <hr>

        <!-- ------------------------ ADD STEP ------------------------------>
        <section class="recipe-step">
            <h3>Steps</h3>
            <div id="add_step">
                <label class="step" for="step1">Step1</label>
                <input type="text" id="step1" name="step" class="form-control" style="height: 90px">
                <br>
            </div>
            <input type=button id="btn-step" class="btn btn-success" value="+">
        </section>
        <hr>

        <!-- ------------------------------------------------------------------->
        <section class="allergen-selection">
            <h3>Allergens</h3>
            <table class="container-fluid table table-bordered">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Flag</th>
                    </tr>
                </thead>
                <tbody>
                    <th:block th:each="flag : ${flagList}">
                        <tr>
                            <td>
                                <div class="custom-control custom-checkbox text-center">
                                    <input class="form-check-input mt-0 align-middle" type="checkbox" th:name="'flag-' + ${flag.getId()}">
                                </div>
                            </td>
                            <td th:text="${flag.getName_en()}"></td>
                        </tr>
                    </th:block>
                </tbody>
            </table>
        </section>
        <hr>

        <!--------------------------------------------------------------------->
        <section class="image-upload">
            <h3>Image</h3>
            <input class="form-control" name="imgSrc" type="file" id="formFile">
        </section>

        <!--------------------------------------------------------------------->
        <div class="button">
            <input id="submit" class="btn btn-success" type="submit" value="Submit"><br><br>
        </div>
    </form>
    <form th:action="@{'/recipe/view'}" method="post">
        <div class="button">
            <input id="back" type="submit" class="btn btn-secondary" value="BACK">
        </div>
    </form>
</main>

<!-- Footer -->
<footer th:replace="includes/footer :: footer"></footer>
</body>
</html>